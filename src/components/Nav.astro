---
import useTranslations from "@utils/i18n";
import { Icon } from "astro-icon/components";

const t = useTranslations(Astro.currentLocale || "es");

const navItems = [
  { href: "#home", icon: "home", label: t("nav.home") },
  { href: "#experience", icon: "briefcase", label: t("nav.experience") },
  { href: "#projects", icon: "code", label: t("nav.projects") },
  { href: "#technologies", icon: "tools", label: t("nav.technologies") },
  { href: "#aboutMe", icon: "user", label: t("nav.aboutMe") },
  { href: "#contact", icon: "mail", label: t("nav.contact") },
];


---

<nav>
  <div class="flex justify-center">

    <div id="menu-btn" class="fixed top-5 hidden left-5 items-center gap-2 text-5xl
         bg-white/10 backdrop-blur-md border border-white/50
         px-3 py-1 rounded-xl text-amber-50
         hover:bg-white/10 transition-all duration-300 h-[60px] max-xl:flex cursor-pointer">
        <Icon name="menu" color="white">
    </div>

    <ul
      id="menu"
      class="flex justify-center gap-x-2 mt-5 text-2xl px-2 py-2 rounded-2xl shadow-fancy fixed z-100
             bg-white/10 backdrop-blur-md border border-white/50  text-amber-50 max-xl:hidden max-xl:flex-col max-xl:w-full max-xl:h-full max-xl:gap-y-5"
    >
    <span id="close-btn" class="absolute text-5xl top-0 left-12 cursor-pointer hidden">x</span>
      {
        navItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="flex relative justify-center items-center gap-1 px-3 py-1 rounded-xl
                     transition-all duration-300 ease-out z-50
                     hover:bg-white/10 hover:backdrop-blur-sm hover:shadow-lg hover:shadow-white/10"
            >
              {item.icon && (
                <Icon name={item.icon} size={30} color={"#89CFF0"} />
              )}
              {item.label}
            </a>
          </li>
        ))
      }
    </ul>

    <div
      id="select-idiom"
      class="fixed top-5 right-5 z-10
         flex items-center gap-2 text-2xl
         bg-white/10 backdrop-blur-md border border-white/50
         px-3 py-1 rounded-xl text-amber-50
         hover:bg-white/10 transition-all duration-300 h-[60px]"
    >
      <img
        src={Astro.currentLocale === "en" ? "/flags/en.png" : "/flags/es.png"}
        alt="flag"
        class="w-6 h-6 rounded-sm"
      />

      <select
        class="bg-transparent text-amber-50 focus:outline-none cursor-pointer flex"
        onchange="location.href = this.value"
      >
        <option value="/es" selected={Astro.currentLocale === "es"}>
          ES
        </option>
        <option value="/en" selected={Astro.currentLocale === "en"}>EN</option>
      </select>
    </div>

  </div>
</nav>

<!-- Script para abrir/cerrar el menÃº -->
<script>
  const btn = document.getElementById("menu-btn");
  const menu = document.getElementById("menu");
  const closeMenuBtn = document.getElementById("close-btn");

  btn?.addEventListener("click", () => {
     menu?.classList.toggle("max-xl:hidden");
     closeMenuBtn?.classList.toggle("hidden")
     
  });

  closeMenuBtn?.addEventListener("click", () => {
     menu?.classList.toggle("max-xl:hidden");
     closeMenuBtn?.classList.toggle("hidden")

  })
</script>
